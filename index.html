<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard de Indicadores Econômicos - por Gabriel Paiva</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background-color: #f4f4f4; }
        .container { max-width: 900px; margin: auto; background: white; padding: 20px; border-radius: 8px; }
        h1 { text-align: center; }
        select { width: 100%; padding: 10px; margin-bottom: 20px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Dashboard - Projeções do Relatório Focus</h1>
        <label for="indicator-select">Selecione um Indicador:</label>
        <select id="indicator-select">
            <option value="SELIC">Taxa Selic (% a.a.)</option>
            <option value="IPCA">IPCA (Inflação %)</option>
            <option value="PIB">PIB (Crescimento %)</option>
            <option value="CÂMBIO">Câmbio (R$/US$)</option>
        </select>
        <canvas id="myChart"></canvas>
    </div>

    <script>
        // OS DADOS AGORA ESTÃO DIRETAMENTE AQUI
        const allData = [{"id":310,"data_relatorio":"2025-08-08","indicador":"IPCA ","projecao_ano":2025,"mediana_projecao":5.05},{"id":311,"data_relatorio":"2025-08-08","indicador":"IPCA ","projecao_ano":2026,"mediana_projecao":4.41},{"id":312,"data_relatorio":"2025-08-08","indicador":"IPCA ","projecao_ano":2027,"mediana_projecao":4.00},{"id":313,"data_relatorio":"2025-08-08","indicador":"IPCA ","projecao_ano":2028,"mediana_projecao":3.80},{"id":314,"data_relatorio":"2025-08-08","indicador":"PIB ","projecao_ano":2025,"mediana_projecao":2.21},{"id":315,"data_relatorio":"2025-08-08","indicador":"PIB ","projecao_ano":2026,"mediana_projecao":1.87},{"id":316,"data_relatorio":"2025-08-08","indicador":"PIB ","projecao_ano":2027,"mediana_projecao":1.93},{"id":317,"data_relatorio":"2025-08-08","indicador":"PIB ","projecao_ano":2028,"mediana_projecao":2.00},{"id":318,"data_relatorio":"2025-08-08","indicador":"CÂMBIO ","projecao_ano":2025,"mediana_projecao":5.60},{"id":319,"data_relatorio":"2025-08-08","indicador":"CÂMBIO ","projecao_ano":2026,"mediana_projecao":5.70},{"id":320,"data_relatorio":"2025-08-08","indicador":"CÂMBIO ","projecao_ano":2027,"mediana_projecao":5.70},{"id":321,"data_relatorio":"2025-08-08","indicador":"CÂMBIO ","projecao_ano":2028,"mediana_projecao":5.70},{"id":322,"data_relatorio":"2025-08-08","indicador":"SELIC","projecao_ano":2025,"mediana_projecao":15.00},{"id":323,"data_relatorio":"2025-08-08","indicador":"SELIC","projecao_ano":2026,"mediana_projecao":12.50},{"id":324,"data_relatorio":"2025-08-08","indicador":"SELIC","projecao_ano":2027,"mediana_projecao":10.50},{"id":325,"data_relatorio":"2025-08-08","indicador":"SELIC","projecao_ano":2028,"mediana_projecao":10.00},{"id":326,"data_relatorio":"2025-08-15","indicador":"IPCA","projecao_ano":2025,"mediana_projecao":5.00},{"id":327,"data_relatorio":"2025-08-15","indicador":"IPCA","projecao_ano":2026,"mediana_projecao":4.38},{"id":328,"data_relatorio":"2025-08-15","indicador":"IPCA","projecao_ano":2027,"mediana_projecao":4.00},{"id":329,"data_relatorio":"2025-08-15","indicador":"IPCA","projecao_ano":2028,"mediana_projecao":3.80},{"id":330,"data_relatorio":"2025-08-15","indicador":"PIB","projecao_ano":2025,"mediana_projecao":2.20},{"id":331,"data_relatorio":"2025-08-15","indicador":"PIB","projecao_ano":2026,"mediana_projecao":1.87},{"id":332,"data_relatorio":"2025-08-15","indicador":"PIB","projecao_ano":2027,"mediana_projecao":1.95},{"id":333,"data_relatorio":"2025-08-15","indicador":"PIB","projecao_ano":2028,"mediana_projecao":2.00},{"id":334,"data_relatorio":"2025-08-15","indicador":"CÂMBIO","projecao_ano":2025,"mediana_projecao":5.58},{"id":335,"data_relatorio":"2025-08-15","indicador":"CÂMBIO","projecao_ano":2026,"mediana_projecao":5.65},{"id":336,"data_relatorio":"2025-08-15","indicador":"CÂMBIO","projecao_ano":2027,"mediana_projecao":5.65},{"id":337,"data_relatorio":"2025-08-15","indicador":"CÂMBIO","projecao_ano":2028,"mediana_projecao":5.60},{"id":338,"data_relatorio":"2025-08-15","indicador":"SELIC","projecao_ano":2025,"mediana_projecao":15.00},{"id":339,"data_relatorio":"2025-08-15","indicador":"SELIC","projecao_ano":2026,"mediana_projecao":12.50},{"id":340,"data_relatorio":"2025-08-15","indicador":"SELIC","projecao_ano":2027,"mediana_projecao":10.50},{"id":341,"data_relatorio":"2025-08-15","indicador":"SELIC","projecao_ano":2028,"mediana_projecao":10.00},{"id":342,"data_relatorio":"2025-08-22","indicador":"IPCA","projecao_ano":2025,"mediana_projecao":4.95},{"id":343,"data_relatorio":"2025-08-22","indicador":"IPCA","projecao_ano":2026,"mediana_projecao":4.35},{"id":344,"data_relatorio":"2025-08-22","indicador":"IPCA","projecao_ano":2027,"mediana_projecao":3.98},{"id":345,"data_relatorio":"2025-08-22","indicador":"IPCA","projecao_ano":2028,"mediana_projecao":3.80},{"id":346,"data_relatorio":"2025-08-22","indicador":"PIB","projecao_ano":2025,"mediana_projecao":2.19},{"id":347,"data_relatorio":"2025-08-22","indicador":"PIB","projecao_ano":2026,"mediana_projecao":1.88},{"id":348,"data_relatorio":"2025-08-22","indicador":"PIB","projecao_ano":2027,"mediana_projecao":1.90},{"id":349,"data_relatorio":"2025-08-22","indicador":"PIB","projecao_ano":2028,"mediana_projecao":2.00},{"id":350,"data_relatorio":"2025-08-22","indicador":"CÂMBIO","projecao_ano":2025,"mediana_projecao":5.56},{"id":351,"data_relatorio":"2025-08-22","indicador":"CÂMBIO","projecao_ano":2026,"mediana_projecao":5.63},{"id":352,"data_relatorio":"2025-08-22","indicador":"CÂMBIO","projecao_ano":2027,"mediana_projecao":5.63},{"id":353,"data_relatorio":"2025-08-22","indicador":"CÂMBIO","projecao_ano":2028,"mediana_projecao":5.60},{"id":354,"data_relatorio":"2025-08-22","indicador":"SELIC","projecao_ano":2025,"mediana_projecao":15.00},{"id":355,"data_relatorio":"2025-08-22","indicador":"SELIC","projecao_ano":2026,"mediana_projecao":12.50},{"id":356,"data_relatorio":"2025-08-22","indicador":"SELIC","projecao_ano":2027,"mediana_projecao":10.50},{"id":357,"data_relatorio":"2025-08-22","indicador":"SELIC","projecao_ano":2028,"mediana_projecao":10.00},{"id":358,"data_relatorio":"2025-08-29","indicador":"IPCA","projecao_ano":2025,"mediana_projecao":4.86},{"id":359,"data_relatorio":"2025-08-29","indicador":"IPCA","projecao_ano":2026,"mediana_projecao":4.31},{"id":360,"data_relatorio":"2025-08-29","indicador":"IPCA","projecao_ano":2027,"mediana_projecao":3.94},{"id":361,"data_relatorio":"2025-08-29","indicador":"IPCA","projecao_ano":2028,"mediana_projecao":3.80},{"id":362,"data_relatorio":"2025-08-29","indicador":"PIB","projecao_ano":2025,"mediana_projecao":2.19},{"id":363,"data_relatorio":"2025-08-29","indicador":"PIB","projecao_ano":2026,"mediana_projecao":1.88},{"id":364,"data_relatorio":"2025-08-29","indicador":"PIB","projecao_ano":2027,"mediana_projecao":1.89},{"id":365,"data_relatorio":"2025-08-29","indicador":"PIB","projecao_ano":2028,"mediana_projecao":2.00},{"id":366,"data_relatorio":"2025-08-29","indicador":"CÂMBIO","projecao_ano":2025,"mediana_projecao":5.56},{"id":367,"data_relatorio":"2025-08-29","indicador":"CÂMBIO","projecao_ano":2026,"mediana_projecao":5.62},{"id":368,"data_relatorio":"2025-08-29","indicador":"CÂMBIO","projecao_ano":2027,"mediana_projecao":5.62},{"id":369,"data_relatorio":"2025-08-29","indicador":"CÂMBIO","projecao_ano":2028,"mediana_projecao":5.60},{"id":370,"data_relatorio":"2025-08-29","indicador":"SELIC","projecao_ano":2025,"mediana_projecao":15.00},{"id":371,"data_relatorio":"2025-08-29","indicador":"SELIC","projecao_ano":2026,"mediana_projecao":12.50},{"id":372,"data_relatorio":"2025-08-29","indicador":"SELIC","projecao_ano":2027,"mediana_projecao":10.50},{"id":373,"data_relatorio":"2025-08-29","indicador":"SELIC","projecao_ano":2028,"mediana_projecao":10.00}];

        const indicatorSelect = document.getElementById('indicator-select');
        const chartCanvas = document.getElementById('myChart');
        let myChart;

        function renderChart(data, selectedIndicator) {
            const filteredData = data.filter(item => item.indicador.trim() === selectedIndicator);
            const dataByYear = {};
            filteredData.forEach(item => {
                if (!dataByYear[item.projecao_ano]) dataByYear[item.projecao_ano] = [];
                dataByYear[item.projecao_ano].push({ x: item.data_relatorio, y: item.mediana_projecao });
            });

            const datasets = Object.keys(dataByYear).sort().map(year => ({
                label: `Projeção para ${year}`,
                data: dataByYear[year].sort((a, b) => new Date(a.x) - new Date(b.x)),
                fill: false, tension: 0.1, borderWidth: 2
            }));

            if (myChart) myChart.destroy();

            myChart = new Chart(chartCanvas, {
                type: 'line', data: { datasets },
                options: {
                    scales: {
                        x: { type: 'time', time: { unit: 'week', tooltipFormat: 'dd/MM/yyyy' }, title: { display: true, text: 'Data do Relatório' } },
                        y: { title: { display: true, text: 'Valor Projetado' } }
                    }
                }
            });
        }
        
        // Inicia o processo quando a página carrega
        renderChart(allData, indicatorSelect.value);
        indicatorSelect.addEventListener('change', e => renderChart(allData, e.target.value));

    </script>
</body>
</html>